<apex:page id="contractRepayPDFPage" standardController="Lending_Contract__c" 
           extensions="RepaymentPDFController" tabStyle="Lending_Contract__c"
           showHeader="false" sidebar="false" renderAs="pdf" applyHtmlTag="false" applyBodyTag="false"
           title="{!mContract.Name} - {!$Label.fscore__pdf_repayment_document_title}">  

    <head>
        <title>{!mContract.Name} - {!$Label.fscore__pdf_repayment_document_title}</title>
        
        <apex:composition template="fsCore__pdfTemplatePage">
            <apex:define name="pdfHeader"></apex:define>
            <apex:define name="pdfFooter"></apex:define>
            
            <!-- Title -->
            <apex:define name="pageTitle">
                <span class="pdf-doc-title"><strong>{!$Label.fscore__pdf_repayment_document_title}</strong></span><br/>
            </apex:define>
            
            <!-- Sub-Title -->
            <apex:define name="pageSubTitle">
                <span class="pdf-doc-sub-title">{!$Label.fscore__pdf_reference_number_title} {!mContract.Name}</span><br/>
            </apex:define>
            
            <!-- Contract Info -->
            <apex:define name="recordInfo">
                <table class="record-info-table">
                    <tbody>
                        <apex:repeat value="{!$ObjectType.Lending_Contract__c.FieldSets.PDF_Document_Fields}" var="contractField">
                            <tr>
                                <th width="40%">{!contractField.Label}</th>
                                <td width="60%"><apex:outputField value="{!mContract[contractField.fieldPath]}"/></td>
                            </tr>
                        </apex:repeat>
                    </tbody>
                </table>
            </apex:define>

            <!-- Company Logo -->
            <apex:define name="logo">
                <img src="{!companyLogoURL}"/>
            </apex:define>

            <!-- Branch Info -->
            <apex:define name="branchInfo">
                <table class="record-info-table">
                    <tbody>
                        <apex:repeat value="{!$ObjectType.fsCore__Branch_Setup__c.FieldSets.fsCore__PDF_Document_Fields}" var="branchField">
                            <tr><td align="right"><apex:outputField value="{!mBranch[branchField.fieldPath]}"/></td></tr>
                        </apex:repeat>
                    </tbody>
                </table>
            </apex:define>
            
            <apex:define name="relatedInfo"></apex:define>

            <!-- Repayment Detail Table -->
            <apex:define name="pdfContent">
                <apex:dataTable id="iRepaymentTable" value="{!mRepaymentList}"
                                var="repay" styleClass="pdf-content-table">  

                    <apex:repeat value="{!$ObjectType.Contract_Repayment__c.FieldSets.PDF_List_Fields}"
                                 var="repayField">
                        <apex:column headerValue="{!repayField.Label}">
                            <apex:outputField value="{!repay[repayField.fieldPath]}"/>
                        </apex:column>
                    </apex:repeat>
                </apex:dataTable>
            </apex:define>
            
        </apex:composition>
    </head>
</apex:page>
